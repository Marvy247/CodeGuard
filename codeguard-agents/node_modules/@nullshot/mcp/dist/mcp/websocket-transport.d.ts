import { JSONRPCMessage } from '@modelcontextprotocol/sdk/types.js';
import { Transport } from '@modelcontextprotocol/sdk/shared/transport.js';
export interface WebSocket {
    send: (data: string | ArrayBuffer) => void;
    close: (code?: number, reason?: string) => void;
}
/**
 * WebSocket Transport that connects to a Durable Object and uses hibernation
 * to efficiently handle WebSocket connections.
 *
 * There is currently no native support for WebSocket Transport in the MCP server protocol as of 16-04-2025
 * This is a custom implementation that allows for WebSocket connections to be used with the MCP server using its native client websocket transport.
 */
export declare class WebSocketTransport implements Transport {
    private readonly webSocket;
    readonly sessionId: string;
    private _closed;
    constructor(webSocket: WebSocket, sessionId: string);
    /**
     * Send a JSON-RPC message to the client
     */
    send(message: JSONRPCMessage): Promise<void>;
    /**
     * Close the WebSocket connection
     * @param code Optional close code (defaults to 1000 - normal closure)
     * @param reason Optional reason message
     */
    close(code?: number, reason?: string): Promise<void>;
    /**
     * Handle an incoming message from the WebSocket
     */
    handleMessage(data: string | ArrayBuffer): void;
    /**
     * Called when a message is received from the client
     */
    onmessage?: ((message: JSONRPCMessage) => void) | undefined;
    /**
     * Called when the connection is closed
     */
    onclose?: (() => void) | undefined;
    /**
     * Called when an error occurs
     */
    onerror?: ((error: Error) => void) | undefined;
    /**
     * Start the transport
     */
    start(): Promise<void>;
}
