import { Hono } from 'hono';
import { ExternalService } from '../service';
import { AgentEnv } from '../env';
import { ToolSet } from 'ai';
import { MiddlewareService } from '../aisdk/middleware';
/**
 * Configuration for an MCP tool server
 */
export interface MCPServerConfig {
    url?: string;
    source?: string;
    command?: string;
    args?: string[];
    env?: Record<string, string>;
}
/**
 * Full MCP configuration structure matching mcp.json format
 */
export interface MCPConfig {
    mcpServers: Record<string, MCPServerConfig>;
}
/**
 * Service for managing and exposing tools configurations and injecting them into the language model
 */
export declare class ToolboxService implements ExternalService, MiddlewareService {
    name: string;
    private env;
    private mcpManager;
    private mcpConfig?;
    constructor(env: AgentEnv, mcpConfig?: MCPConfig);
    /**
     * Parse the MCP servers configuration from static config
     */
    private parseServerConfig;
    /**
     * Find all service bindings of type Fetcher from the environment
     * Note: These are candidates that need to be tested to see if they're MCP services
     */
    private findFetcherBindings;
    /**
     * Detect if a server config uses github: source for service bindings
     */
    private isServiceBindingSource;
    /**
     * Generate service binding name from server name
     * e.g., "mcp-template" -> "MCP_TEMPLATE"
     */
    private getServiceBindingName;
    /**
     * Get service binding from environment
     */
    private getServiceBinding;
    /**
     * Test if a service binding is an MCP service by trying the /sse endpoint
     * This is a more conservative approach - only services that respond correctly to MCP SSE requests
     * are considered MCP services.
     */
    private testMCPServiceBinding;
    /**
     * Initialize the tools service by connecting to configured MCP servers
     */
    initialize(): Promise<void>;
    /**
     * Log a comprehensive initialization summary
     */
    private logInitializationSummary;
    /**
     * Check for duplicate tool names across MCP servers and log warnings
     */
    private checkForDuplicateToolNames;
    /**
     * Register tool-related routes with the Hono app
     */
    registerRoutes<E extends AgentEnv>(app: Hono<{
        Bindings: E;
    }>): void;
    /**
     * Clean up resources when service is shutdown
     */
    shutdown(): Promise<void>;
    transformStreamTextTools(tools?: ToolSet): ToolSet;
}
